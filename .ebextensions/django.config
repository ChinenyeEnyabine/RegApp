# .ebextensions/django.config
option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: skisubpro.wsgi:application

container_commands:
  01_collectstatic:
    command: "source /var/app/venv/*/bin/activate && python manage.py collectstatic --noinput"
    leader_only: true
  02_mkdir_media:
    command: "mkdir -p /var/app/media"
  03_chown_media:
    command: "chown -R webapp:webapp /var/app/media"

files:
  "/etc/nginx/conf.d/media.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      location /media/ {
          alias /var/app/media/;
          autoindex off;
          include /etc/nginx/mime.types;
      }
